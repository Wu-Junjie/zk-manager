webpackJsonp([1],{NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[this.isRouterAlive?e("router-view"):this._e()],1)},staticRenderFns:[]};var n=a("VU/8")({name:"App",provide:function(){return{reload:this.reload}},data:function(){return{isRouterAlive:!0}},methods:{reload:function(){this.isRouterAlive=!1,this.$nextTick(function(){this.isRouterAlive=!0})}}},o,!1,function(t){a("zbFd")},null,null).exports,r=a("/ocq"),i=a("mtWM"),l=a.n(i),c={data:function(){var t=this;return{form:{username:this.$store.state.username,password:this.$store.state.password,rememberFlag:!0},rules:{username:[{validator:function(e,a,s){""===a?s(new Error("请输入用户名")):""!==t.form.username&&s()},trigger:"blur"}],password:[{validator:function(e,a,s){""===a?s(new Error("请输入密码")):""!==t.form.password&&s()},trigger:"blur"}]}}},methods:{submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;var a,s;(a="/login",s={username:e.form.username,password:e.form.password},l()({method:"post",url:"/api"+a,data:s,transformRequest:[function(t){var e="";for(var a in t)e+=encodeURIComponent(a)+"="+encodeURIComponent(t[a])+"&";return e}],headers:{"Content-Type":"application/x-www-form-urlencoded"}})).then(function(t){if("success"!==t.data.status)return e.$notify.error({title:"Login Error",message:"Please enter correct username and password!"}),e.form.username="",e.form.password="",e.$store.commit("cleanUserInfo"),!1;e.form.rememberFlag?e.$store.commit("changeUserInfo",e.form):e.$store.commit("cleanUserInfo"),e.$router.replace({path:"/home"}),e.$notify({title:"Login Success",type:"success",duration:800})})})},resetForm:function(t){this.$refs[t].resetFields()}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-form",{ref:"form",staticClass:"login-container",attrs:{model:t.form,"status-icon":"",rules:t.rules,"label-width":"100px"}},[a("h2",{staticClass:"login_title"},[t._v("登录")]),t._v(" "),a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),a("el-checkbox",{staticClass:"login_remember",attrs:{"label-position":"left"},model:{value:t.form.rememberFlag,callback:function(e){t.$set(t.form,"rememberFlag",e)},expression:"form.rememberFlag"}},[t._v("记住密码")]),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("form")}}},[t._v("提交")]),t._v(" "),a("el-button",{on:{click:function(e){return t.resetForm("form")}}},[t._v("重置")])],1)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(c,d,!1,function(t){a("XbBh")},"data-v-5b9e08a8",null).exports,h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-aside",{attrs:{width:"22%"}},[a("div",{staticClass:"home-aside"},[a("div",{staticClass:"home-aside-input"},[a("el-input",{attrs:{placeholder:"请输入内容",size:"small"},on:{change:t.searchChange},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1),t._v(" "),a("div",{staticClass:"home-aside-tree"},[a("el-tree",{ref:"tree",attrs:{data:t.data,props:t.defaultProps,"node-key":"path","highlight-current":"","render-content":t.renderContent,"filter-node-method":t.filterNode},on:{"node-click":t.handleNodeClick}})],1)])])},staticRenderFns:[]};var m=a("VU/8")({name:"Aside",data:function(){return{input:"",nodePath:"/",data:[],defaultProps:{children:"children",label:"label",icon:"icon",path:"path"}}},computed:{zkNode:function(){return this.$store.state.host}},watch:{zkNode:function(t){this.load()}},mounted:function(){this.load()},methods:{filterNode:function(t,e){return!t||-1!==e.label.indexOf(t)},searchChange:function(t){this.$refs.tree.filter(t)},handleNodeClick:function(){var t=this;this.nodePath=this.$refs.tree.getCurrentNode().path,this.$store.commit("changeNodePath",this.nodePath);var e={node:this.$store.state.host,path:this.nodePath};this.$axios.post("/api/getNodeDetail",e).then(function(e){var a=e.data;"fail"===a.status?t.$message({type:"error",message:"Error:"+a.msg}):(t.$store.commit("changeNodeStat",a.stat),t.$store.commit("changeNodeData",a.data))})},renderContent:function(t,e){var a=e.node,s=e.data;return e.store,t("span",[t("i",{class:s.icon}),t("span",{style:"padding-left: 4px;"},[a.label])])},load:function(){var t=this;this.$axios.get("/api/getAllZkNodes",{params:{node:this.$store.state.host}}).then(function(e){var a=e.data;"success"===a.status?t.data=[a.allZkNode]:t.$message({type:"error",message:"Error:"+a.msg})})}}},h,!1,function(t){a("w+dZ")},"data-v-4e22f5cb",null).exports,f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-header",{attrs:{height:"100px"}},[a("div",{staticClass:"header"},[a("font",{staticClass:"header-font"},[a("i",{staticClass:"el-icon-s-home"},[t._v("Zookeeper Manager")])]),t._v(" "),a("div",{staticClass:"header-node"},[a("el-select",{staticClass:"node-select",attrs:{filterable:"",placeholder:"请选择节点",size:"small"},on:{change:t.change},model:{value:t.host,callback:function(e){t.host=e},expression:"host"}},t._l(t.nodeOptions,function(t){return a("el-option",{key:t.host,attrs:{label:t.label,value:t.host,loading:""}})}),1),t._v(" "),a("el-button",{staticClass:"node-add",attrs:{type:"info",size:"small",icon:"el-icon-plus",plain:""},on:{click:t.add}},[t._v("Add")])],1)],1)])},staticRenderFns:[]};var p=a("VU/8")({name:"Header",data:function(){return{host:this.$store.state.host,nodeOptions:[{host:"localhost:2181",label:"localhost:2181"}]}},inject:["reload"],methods:{change:function(){this.$store.commit("changeZkHost",this.host),this.reload()},add:function(){var t=this;this.$prompt("Please Enter Zookeeper Host&Port","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){var a=e.value;if(a){t.$message({type:"success",message:"Your ZK Host: "+a}),t.host=a,t.nodeOptions.push({host:a,label:a});var s={node:t.host};t.$axios.post("/api/addNode",s).then(function(e){!0===e.data&&(t.$store.commit("changeZkHost",a),t.reload())})}else t.$message({type:"info",message:"Host cannot be null"})}).catch(function(){t.$message({type:"info",message:"取消输入"})})}},mounted:function(){var t=this;this.$axios.get("/api/getNodeList").then(function(e){t.nodeOptions=e.data})}},f,!1,function(t){a("nQc0")},"data-v-25a7820a",null).exports,v=a("mvHQ"),g=a.n(v),$={name:"Content",data:function(){return{input:"",detail:"",stat:"",data:""}},inject:["reload"],computed:{nodePath:function(){return this.$store.state.nodePath},nodeDetail:function(){return{stat:this.$store.state.stat,data:this.$store.state.data}},nodeData:function(){return this.$store.state.data}},watch:{nodePath:function(t){this.input=t},nodeDetail:function(t){this.detail=t},nodeData:function(t){this.data=g()(t)}},methods:{handleSave:function(){var t=this,e={node:this.$store.state.host,path:this.input,data:this.data};this.$axios.post("/api/saveNode",e).then(function(e){"fail"===e.data.status&&t.$message({type:"error",message:"Save Data Error"})}),this.reload()},handleDelete:function(){var t=this;this.$confirm("将删除'"+this.input+"'节点，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.delete()}).catch(function(){t.$message({type:"info",message:"Cancled Delete"})})},delete:function(){var t=this,e={node:this.$store.state.host,path:this.input};this.$axios.post("/api/deleteNode",e).then(function(e){"success"===e.data.status?(t.$message({type:"success",message:"Delete Success!"}),t.reload()):t.$message({type:"error",message:"Delete Error!"+e.data.msg})})}}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-main",[a("div",{staticClass:"content"},[a("div",{staticClass:"content-path"},[a("div",[t._v("Path: "+t._s(this.$store.state.nodePath))])]),t._v(" "),a("div",{staticClass:"content-data"},[a("div",{staticClass:"content-detail"},[a("json-viewer",{staticClass:"detail",attrs:{value:t.detail,"expand-depth":5,copyable:""}})],1),t._v(" "),a("div",{staticClass:"content-edit"},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:8},placeholder:"data"},model:{value:t.data,callback:function(e){t.data=e},expression:"data"}})],1)]),t._v(" "),a("div",{staticClass:"content-action"},[a("div",{staticClass:"action-input"},[a("el-input",{attrs:{placeholder:"",size:"small",clearable:""},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}})],1),t._v(" "),a("div",{staticClass:"action-btn"},[a("el-button",{attrs:{type:"info",icon:"el-icon-delete",size:"small",plain:""},on:{click:t.handleDelete}},[t._v("Delete")]),t._v(" "),a("el-button",{attrs:{type:"info",icon:"el-icon-check",size:"small",plain:""},on:{click:t.handleSave}},[t._v("Save")])],1)])])])},staticRenderFns:[]};var _={name:"Home",components:{HomeHeader:p,HomeAside:m,HomeContent:a("VU/8")($,b,!1,function(t){a("b0+j")},"data-v-0678be23",null).exports},data:function(){return{}}},w={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("el-container",{staticClass:"main-container",attrs:{direction:"vertical"}},[e("home-header"),this._v(" "),e("el-container",[e("home-aside"),this._v(" "),e("home-content")],1)],1)],1)},staticRenderFns:[]};var x=a("VU/8")(_,w,!1,function(t){a("vMXN")},"data-v-16e76fcb",null).exports;s.default.use(r.a);var C=new r.a({mode:"history",routes:[{path:"/",name:"login",component:u},{path:"/home",name:"home",component:x}]}),y=a("NYxO");s.default.use(y.a);var k="",N="",S="";try{localStorage.username&&(k=localStorage.username),localStorage.password&&(N=localStorage.password),localStorage.host&&(S=localStorage.host)}catch(t){}var P=new y.a.Store({state:{username:k,password:N,host:S,nodePath:"/",stat:{},data:""},mutations:{changeUserInfo:function(t,e){t.username=e.username,t.password=e.password;try{localStorage.username=e.username,localStorage.password=e.password}catch(t){}},cleanUserInfo:function(t){t.username="",t.password="";try{localStorage.username="",localStorage.password=""}catch(t){}},changeZkHost:function(t,e){t.host=e;try{localStorage.host=e}catch(t){}},changeNodePath:function(t,e){t.nodePath=e},changeNodeStat:function(t,e){t.stat=e},changeNodeData:function(t,e){t.data=e}}}),F=a("zL8q"),R=a.n(F),H=(a("tvR6"),a("R0ti")),D=a.n(H);s.default.use(D.a),s.default.config.productionTip=!1,s.default.use(R.a,l.a),s.default.prototype.$axios=l.a,new s.default({el:"#app",router:C,store:P,axios:l.a,components:{App:n},template:"<App/>"})},XbBh:function(t,e){},"b0+j":function(t,e){},nQc0:function(t,e){},tvR6:function(t,e){},vMXN:function(t,e){},"w+dZ":function(t,e){},zbFd:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.81cc40bdaead57df1f03.js.map